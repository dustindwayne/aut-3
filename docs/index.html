<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AUT-3 Documentation Viewer</title>
<style>
    body {
        margin: 0;
        background: #000;
        font-family: "Inter", "Segoe UI", Roboto, sans-serif;
        color: #eaeaea;
        display: flex;
        height: 100vh;
        overflow: hidden;
    }

    /* Sidebar */
    #sidebar {
        width: 320px;
        background:
            radial-gradient(circle at 20% 10%, #111 0%, #050505 70%),
            linear-gradient(180deg, #000 0%, #0a0a0a 100%);
        border-right: 1px solid #222;
        overflow-y: auto;
        padding: 20px;
    }

    #sidebar h2 {
        font-size: 1.3em;
        margin-bottom: 20px;
        text-align: center;
        font-weight: 600;
    }

    .file-item {
        padding: 12px 14px;
        margin-bottom: 10px;
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.07);
        border-radius: 10px;
        cursor: pointer;
        transition: background 0.2s ease, transform 0.15s ease;
    }

    .file-item:hover {
        background: rgba(255,255,255,0.1);
        transform: translateY(-2px);
    }

    .file-item.active {
        background: rgba(255,255,255,0.15);
        border-color: #fff2;
    }

    /* Main content */
    #content {
        flex-grow: 1;
        overflow-y: auto;
        padding: 35px;
        background: linear-gradient(180deg, #050505 0%, #000 100%);
    }

    #content pre, #content code {
        background: #111 !important;
        color: #ccc !important;
        padding: 8px;
        border-radius: 6px;
        overflow-x: auto;
    }

    #loading {
        opacity: 0.6;
        font-size: 1.1em;
    }

    a { color: #98b9ff; }
</style>
</head>

<body>

<div id="sidebar">
    <h2>AUT-3 Docs</h2>
    <div id="fileList">Loading…</div>
</div>

<div id="content">
    <div id="loading">Select a document from the left.</div>
</div>

<script>
const owner = "dustindwayne";
const repo = "aut-3";

/* Fetch the repo tree */
async function loadFileList() {
    const res = await fetch(`https://api.github.com/repos/${owner}/${repo}/git/trees/main?recursive=1`);
    const data = await res.json();

    const fileList = document.getElementById("fileList");
    fileList.innerHTML = "";

    data.tree
        .filter(item => item.type === "blob" && item.path.endsWith(".md"))
        .forEach(file => {
            const div = document.createElement("div");
            div.className = "file-item";
            div.textContent = file.path;
            div.onclick = () => loadFileContent(file.path, div);
            fileList.appendChild(div);
        });
}

/* Load file contents & render */
async function loadFileContent(path, element) {
    document.querySelectorAll(".file-item").forEach(e => e.classList.remove("active"));
    element.classList.add("active");

    const res = await fetch(`https://raw.githubusercontent.com/${owner}/${repo}/main/${path}`);
    const text = await res.text();

    // Convert markdown → HTML using GitHub API
    const mdRes = await fetch("https://api.github.com/markdown", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ text })
    });
    const html = await mdRes.text();

    document.getElementById("content").innerHTML = html;
}

/* Init */
loadFileList();
</script>

</body>
</html>
